<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Methods and structures · ReverseGeocode.jl</title><meta name="title" content="Methods and structures · ReverseGeocode.jl"/><meta property="og:title" content="Methods and structures · ReverseGeocode.jl"/><meta property="twitter:title" content="Methods and structures · ReverseGeocode.jl"/><meta name="description" content="Documentation for ReverseGeocode.jl."/><meta property="og:description" content="Documentation for ReverseGeocode.jl."/><meta property="twitter:description" content="Documentation for ReverseGeocode.jl."/><meta property="og:url" content="https://BoZenKhaa.github.io/ReverseGeocode.jl/docstrings/"/><meta property="twitter:url" content="https://BoZenKhaa.github.io/ReverseGeocode.jl/docstrings/"/><link rel="canonical" href="https://BoZenKhaa.github.io/ReverseGeocode.jl/docstrings/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">ReverseGeocode.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Methods and structures</a></li><li><a class="tocitem" href="../future_plans/">Future plans</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Methods and structures</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Methods and structures</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/BoZenKhaa/ReverseGeocode.jl/blob/master/docs/src/docstrings.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Methods-and-structures"><a class="docs-heading-anchor" href="#Methods-and-structures">Methods and structures</a><a id="Methods-and-structures-1"></a><a class="docs-heading-anchor-permalink" href="#Methods-and-structures" title="Permalink"></a></h1><ul><li><a href="#ReverseGeocode.COLUMN_TYPE"><code>ReverseGeocode.COLUMN_TYPE</code></a></li><li><a href="#ReverseGeocode.Geocoder"><code>ReverseGeocode.Geocoder</code></a></li><li><a href="#ReverseGeocode.decode-Tuple{Geocoder, AbstractVector{var&quot;#s101&quot;} where var&quot;#s101&quot;&lt;:Real}"><code>ReverseGeocode.decode</code></a></li><li><a href="#ReverseGeocode.decode-Tuple{Geocoder, Union{AbstractMatrix{var&quot;#s4&quot;} where var&quot;#s4&quot;&lt;:Real, AbstractVector{var&quot;#s98&quot;} where var&quot;#s98&quot;&lt;:(AbstractVector{var&quot;#s5&quot;} where var&quot;#s5&quot;&lt;:Real)}}"><code>ReverseGeocode.decode</code></a></li><li><a href="#ReverseGeocode.download_country_codes-Tuple{}"><code>ReverseGeocode.download_country_codes</code></a></li><li><a href="#ReverseGeocode.download_raw_geoname_data-Tuple{}"><code>ReverseGeocode.download_raw_geoname_data</code></a></li><li><a href="#ReverseGeocode.process_and_store_geoname_data-Tuple{}"><code>ReverseGeocode.process_and_store_geoname_data</code></a></li><li><a href="#ReverseGeocode.read_data-Tuple{}"><code>ReverseGeocode.read_data</code></a></li></ul><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ReverseGeocode.COLUMN_TYPE" href="#ReverseGeocode.COLUMN_TYPE"><code>ReverseGeocode.COLUMN_TYPE</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>Geoname description from https://download.geonames.org/export/dump/:</p><p>Note that in the cities1000 dataset, the <code>name</code> is a city name. </p><p><strong>The main &#39;geoname&#39; table has the following fields :</strong></p><p>geonameid         : integer id of record in geonames database name              : name of geographical point (utf8) varchar(200) asciiname         : name of geographical point in plain ascii characters, varchar(200) alternatenames    : alternatenames, comma separated, ascii names automatically transliterated, convenience attribute from alternatename table, varchar(10000) latitude          : latitude in decimal degrees (wgs84) longitude         : longitude in decimal degrees (wgs84) feature class     : see http://www.geonames.org/export/codes.html, char(1) feature code      : see http://www.geonames.org/export/codes.html, varchar(10) country code      : ISO-3166 2-letter country code, 2 characters cc2               : alternate country codes, comma separated, ISO-3166 2-letter country code, 200 characters admin1 code       : fipscode (subject to change to iso code), see exceptions below, see file admin1Codes.txt for display names of this code; varchar(20) admin2 code       : code for the second administrative division, a county in the US, see file admin2Codes.txt; varchar(80)  admin3 code       : code for third level administrative division, varchar(20) admin4 code       : code for fourth level administrative division, varchar(20) population        : bigint (8 byte int)  elevation         : in meters, integer dem               : digital elevation model, srtm3 or gtopo30, average elevation of 3&#39;&#39;x3&#39;&#39; (ca 90mx90m) or 30&#39;&#39;x30&#39;&#39; (ca 900mx900m) area in meters, integer. srtm processed by cgiar/ciat. timezone          : the iana timezone id (see file timeZone.txt) varchar(40) modification date : date of last modification in yyyy-MM-dd format</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BoZenKhaa/ReverseGeocode.jl/blob/08c47fe288dc26f397ab43317f505033ba0447f4/src/geocoder.jl#L5-L31">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ReverseGeocode.Geocoder" href="#ReverseGeocode.Geocoder"><code>ReverseGeocode.Geocoder</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Geocoder(cities_data::AbstractDataFrame; filters::Vector{Function} = Function[])
Geocoder(;
    data_dir::String=DATA_DIR, 
    geo_file::String=GEO_FILE, 
    decoder_output_columns::Vector{Symbol} = DEFAULT_DECODER_OUTPUT,
    filters::Vector{Function} = Function[]
)</code></pre><p>Geocoder structure that holds the reference points and their labels (city name and country code).</p><p>The second constructor is used to create the Geocoder from the geoname data that it automatically downloads on first run.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BoZenKhaa/ReverseGeocode.jl/blob/08c47fe288dc26f397ab43317f505033ba0447f4/src/geocoder.jl#L60-L72">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ReverseGeocode.decode-Tuple{Geocoder, AbstractVector{var&quot;#s101&quot;} where var&quot;#s101&quot;&lt;:Real}" href="#ReverseGeocode.decode-Tuple{Geocoder, AbstractVector{var&quot;#s101&quot;} where var&quot;#s101&quot;&lt;:Real}"><code>ReverseGeocode.decode</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">decode(gc::Geocoder, point) =&gt; NamedTuple{(:country, :country_code, :city), Tuple{String, String, String}}</code></pre><p>Decode for single point. If processing many points, preferably use <code>decode(gc, points)</code> instead of using this method in a loop. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BoZenKhaa/ReverseGeocode.jl/blob/08c47fe288dc26f397ab43317f505033ba0447f4/src/geocoder.jl#L245-L249">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ReverseGeocode.decode-Tuple{Geocoder, Union{AbstractMatrix{var&quot;#s4&quot;} where var&quot;#s4&quot;&lt;:Real, AbstractVector{var&quot;#s98&quot;} where var&quot;#s98&quot;&lt;:(AbstractVector{var&quot;#s5&quot;} where var&quot;#s5&quot;&lt;:Real)}}" href="#ReverseGeocode.decode-Tuple{Geocoder, Union{AbstractMatrix{var&quot;#s4&quot;} where var&quot;#s4&quot;&lt;:Real, AbstractVector{var&quot;#s98&quot;} where var&quot;#s98&quot;&lt;:(AbstractVector{var&quot;#s5&quot;} where var&quot;#s5&quot;&lt;:Real)}}"><code>ReverseGeocode.decode</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">decode(gc::Geocoder, points) =&gt; Array{NamedTuple{(:country, :country_code, :city), Tuple{String, String, String}}}</code></pre><p>Return country name and city for collection of points. Points should be either an array of staticaly sized arrays  (e.g. StaticArrays) or a Matrix (see NearestNeighbors.jl documentation for details). </p><p>The country and city is determined by the nearest neighbor search in the labelled list of city locations from geonames.org. As such, the results may not be exactly accurate (e.g searches for points close to borders or in the middle of nowhere).</p><p>Nearest neighbor search uses the euclidian metric in the space of lat/lon coordinates. </p><pre><code class="nohighlight hljs"># Example
julia&gt; gc = Geocoder();
julia&gt; ReverseGeocode.decode(gc, [SA[49.5863897, 17.2627342], SA[63.3342550, 12.0280064]])
2-element Array{Tuple{String,String},1}:
 (country=&quot;Czechia&quot;, country_code=&quot;CZ&quot;, city=&quot;Olomouc&quot;)
 (country=&quot;Norway&quot;, country_code=&quot;NO&quot;, city=&quot;Meråker&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BoZenKhaa/ReverseGeocode.jl/blob/08c47fe288dc26f397ab43317f505033ba0447f4/src/geocoder.jl#L217-L236">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ReverseGeocode.download_country_codes-Tuple{}" href="#ReverseGeocode.download_country_codes-Tuple{}"><code>ReverseGeocode.download_country_codes</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Download and resave the country codes csv from geonames.  Country codes are part of the package so this function does not usually need to run during install. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BoZenKhaa/ReverseGeocode.jl/blob/08c47fe288dc26f397ab43317f505033ba0447f4/src/geocoder.jl#L206-L209">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ReverseGeocode.download_raw_geoname_data-Tuple{}" href="#ReverseGeocode.download_raw_geoname_data-Tuple{}"><code>ReverseGeocode.download_raw_geoname_data</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">download_raw_geoname_data(;data_dir=&quot;./data&quot;, geo_file=&quot;cities1000&quot;)</code></pre><p>Download dump from <a href="http://download.geonames.org/export/dump/">geonames.org</a>. This function  fetches a file of cities with a population &gt; 1000 (and seats of administrations of ceratain country subdivisions,  other options are population 500, 5000, 15000, see geonames.org for details). </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BoZenKhaa/ReverseGeocode.jl/blob/08c47fe288dc26f397ab43317f505033ba0447f4/src/geocoder.jl#L169-L175">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ReverseGeocode.process_and_store_geoname_data-Tuple{}" href="#ReverseGeocode.process_and_store_geoname_data-Tuple{}"><code>ReverseGeocode.process_and_store_geoname_data</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">process_geoname_data(;data_dir=&quot;./data&quot;, geo_file=&quot;cities1000&quot;, header =collect(keys(COLUMN_TYPE)), select=DEFAULT_GEONAME_SELECT)</code></pre><p>Process the raw geoname data and save it as a csv. Only selected columns are stored in the csv file. Removes the zip file. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BoZenKhaa/ReverseGeocode.jl/blob/08c47fe288dc26f397ab43317f505033ba0447f4/src/geocoder.jl#L184-L188">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ReverseGeocode.read_data-Tuple{}" href="#ReverseGeocode.read_data-Tuple{}"><code>ReverseGeocode.read_data</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">read_data(;data_dir=&quot;./data&quot;, geo_file=&quot;cities1000&quot;, select=DEFAULT_DECODER_OUTPUT) =&gt; DataFrame</code></pre><p>Load coordinates, country codes and city names from the <code>.csv</code> saved export of the geonames file. Make sure to download the date before calling <code>read_data()</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BoZenKhaa/ReverseGeocode.jl/blob/08c47fe288dc26f397ab43317f505033ba0447f4/src/geocoder.jl#L144-L149">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../future_plans/">Future plans »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.1 on <span class="colophon-date" title="Tuesday 7 May 2024 14:52">Tuesday 7 May 2024</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
